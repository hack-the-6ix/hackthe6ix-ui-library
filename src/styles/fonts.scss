$_: (
  'Avenir': (
    fallback: sans-serif,
    sources: (
      (
        style: normal,
        weight: 400,
        src: (
          embedded-opentype: 'Avenir-Roman.eot',
          truetype: 'Avenir-Roman.ttf',
          woff2: 'Avenir-Roman.woff2',
          woff: 'Avenir-Roman.woff',
          svg: 'Avenir-Roman.svg',
        ),
      ),
      (
        style: normal,
        weight: 600,
        src: (
          embedded-opentype: 'Avenir-Black.eot',
          truetype: 'Avenir-Black.ttf',
          woff2: 'Avenir-Black.woff2',
          woff: 'Avenir-Black.woff',
          svg: 'Avenir-Black.svg',
        ),
      ),
      (
        style: normal,
        weight: 200,
        src: (
          embedded-opentype: 'Avenir-Book.eot',
          truetype: 'Avenir-Book.ttf',
          woff2: 'Avenir-Book.woff2',
          woff: 'Avenir-Book.woff',
          svg: 'Avenir-Book.svg',
        ),
      ),
    ),
  ),
);

@function _load($sources, $path) {
  $res: '';
  @each $type, $url in map-get($sources, src) {
    $res: #{$res} #{if($res == '', '', ',')} url('#{$path}#{$url}') format('#{$type}');
  }
  @return $res;
}

@function font-family($name) {
  $config: map-get($_, $name);
  @return "#{$name}", map-get($config, fallback);
}

@mixin load ($path: '/') {
  @each $tag, $config in $_ {
    @each $source in map-get($config, sources) {
      @font-face {
        font-weight: map-get($source, weight);
        font-style: map-get($source, style);
        src: _load($source, $path);
        font-family: '#{$tag}';
        font-display: swap;
      }
    }
  }

  html, button, input, select, textarea {
    font-family: font-family(Avenir);
  }
}